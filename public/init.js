const base_url="https://feedlr.vercel.app",css_url=base_url+"/widget.css";window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("script[data-feedlr-project-id]");var t=e?.getAttribute("data-feedlr-project-id");const d=["hate","disappointed","natural","good","excellent"];let p="";const o=document.createElement("div");o.classList.add("feedlr-container"),document.body.appendChild(o);let r=base_url+"/api/projects/widget?url="+window.location.host;t&&(r=base_url+"/api/projects/widget?id="+t);(()=>{const e=document.createElement("link");e.rel="stylesheet",e.href=css_url,document.head.appendChild(e)})(),(async()=>{fetch(r).then(e=>e.json()).then(e=>{e.url!==window.location.host&&!e.setting.localhostEnabled||((()=>{const e=document.createElement("button");e.classList.add("feedlr-widget-toggler"),e.innerText="Feedback",o.appendChild(e)})(),(r=>{const l=document.createElement("div");l.classList.add("feedlr-widget"),l.classList.add("widget-fixed");const n=document.createElement("p");n.innerText=r.setting?r.setting.question.replaceAll("%name%",r.name):"What do you think about "+r.name+"?",n.classList.add("feedlr-question");const e=document.createElement("p");e.innerHTML=`
     Widget by <a href="https://feedlr.vercel.app" target="_blank">Feedlr.</a>
    `,e.classList.add("feedlr-footer_text");const a=document.createElement("form");a.classList.add("feedlr-form");const s=document.createElement("div");s.classList.add("feedlr-emoji-container"),d.forEach(t=>{const d=document.createElement("button");d.type="button";d.classList.add("feedlr-emoji-button");d.setAttribute("data-emoji",t);d.addEventListener("click",()=>{p=t;const e=document.querySelectorAll(".feedlr-selected-emoji");e.forEach(e=>{e.classList.remove("feedlr-selected-emoji")});d.classList.add("feedlr-selected-emoji");a.classList.add("show")});const e=document.createElement("img");e.src=base_url+"/widget/emojis/"+t+".gif";e.width=40;e.height=40;d.append(e);s.appendChild(d)});const c=document.createElement("input");c.type="email",c.required=true,c.classList.add("feedlr-email_input"),c.placeholder="Enter your email";const i=document.createElement("textarea");i.required=true,i.classList.add("feedlr-feedback_input"),i.placeholder="Your feedback";const t=document.createElement("button");t.innerText="Submit Feedback",t.classList.add("feedlr-feedback_submit"),a.appendChild(c),a.appendChild(i),a.appendChild(t),a.appendChild(e);const u=document.createElement("div");u.classList.add("feedlr-thankyou-window"),u.innerText=r.setting.thankYouMessage,l.appendChild(n),l.appendChild(s),l.appendChild(a),o.appendChild(l),a.addEventListener("submit",e=>{e.preventDefault();const t=c.value;const d=i.value;const o=window.location.href;fetch(base_url+`/api/responses/create?email=${t}&feedback=${d}&from=${o}&projectId=${r.id}&emoji=${p}`).then(e=>{e.json()}).then(e=>{if(r.setting.coolDownResponse)localStorage.setItem("feedlr-response",`{created_at: ${new Date}, remove_until: ${(new Date).getDate()+30}}`)});l.removeChild(n);l.removeChild(s);l.removeChild(a);l.appendChild(u);setInterval(()=>{const e=document.querySelector(".feedlr-container");e.style.display="none"},4e3)})})(e),(e=>{const t=document.querySelector(":root"),d=document.querySelector(".dark");t.style.setProperty("--feedlr-primary-color","#"+(e?e.lightModeButtonColor:"9261DF")),d?.style.setProperty("--feedlr-primary-color","#"+(e?e.darkModeButtonColor:"9261DF")),t.style.setProperty("--feedlr-widget-bg","#"+(e?e.lightModeBackground:"ffffff")),d?.style.setProperty("--feedlr-widget-bg","#"+(e?e.darkModeBackground:"0F0F0F")),t.style.setProperty("--feedlr-button-color","#"+(e?e.lightModeButtonColor:"9261DF")),d?.style.setProperty("--feedlr-button-color","#"+(e?e.darkModeButtonColor:"9261DF")),t.style.setProperty("--feedlr-text-color","#"+(e?e.lightModeTextColor:"9261DF")),d?.style.setProperty("--feedlr-text-color","#"+(e?e.darkModeTextColor:"9261DF"))})(e.setting))}).catch(e=>console.log(e))})()});